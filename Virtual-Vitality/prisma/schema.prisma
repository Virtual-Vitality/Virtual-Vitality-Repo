// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  userName  String   @unique
  password  String
  payment   Payment?
  isCoach   Boolean
  coachInfo Coach?
  coaches   Coach[]  @relation("assignedUsers")
}

model Coach {
  id             Int         @id @default(autoincrement())
  name           String
  isNutritionist Boolean
  imgURL         String
  userId         Int         @unique
  userInfo       User        @relation(fields: [userId], references: [id])
  assignedUsers  User[]      @relation("assignedUsers")
  workoutTypes    WorkoutType[] 
}

model WorkoutType {
  id       Int       @id @default(autoincrement())
  name     String
  coaches  Coach[]
  workouts Workout[]
}

model Payment {
  id             Int    @id @default(autoincrement())
  cardHolderName String
  cardNumber     Int    @unique
  expiration     String @db.VarChar(5)
  cvv            Int
  zipCode        Int
  User           User   @relation(fields: [userId], references: [id])
  userId         Int    @unique
}

model Excercise {
  id                   Int                    @id @default(autoincrement())
  name                 String
  muscleGroup          String
  description          String
  imgUrl               String
  videoLink            String
  ExcercisesOnWorkouts ExcercisesOnWorkouts[]
}

model Workout {
  id                   Int                    @id @default(autoincrement())
  name                 String
  description          String
  ExcercisesOnWorkouts ExcercisesOnWorkouts[]
  WorkoutType          WorkoutType           @relation(fields: [workoutTypeId], references: [id])
  workoutTypeId        Int
}

model ExcercisesOnWorkouts {
  id            Int       @id @default(autoincrement())
  excerciseId   Int
  workoutId     Int
  exercise      Excercise @relation(fields: [excerciseId], references: [id])
  workout       Workout   @relation(fields: [workoutId], references: [id])
  excerciseReps Int
  excerciseSets Int
}
